var History=Class.extend({init:function(a){this._capacity=a,this._array=[]},clear:function(){this._array=[]},remove:function(a,b){this._array.splice(a,b)},push:function(a){this._array.length==this._capacity&&this._array.shift(),this._array.push(a)},getAt:function(a){if(a<0||a>=this._array.length)throw"index out of range";return this._array[a]},getLength:function(){return this._array.length},getCapacity:function(){return this._capacity},getArray:function(){return this._array},isFull:function(){return this._capacity==this._array.length}});var Tool=Class.extend({init:function(a,b){},dispose:function(){},mousedown:function(x,y){},mouseup:function(x,y){},mousemove:function(x,y){},mousehover:function(x,y){},mouseout:function(x,y){}});var VirtualPaper=Class.extend({_Canvas:null,init:function(canvasElement){this._Canvas=canvasElement},dispose:function(){}});var MathEx={distance:function(a,b,c,d){return Math.sqrt(Math.pow(c- a,2)+ Math.pow(d- b,2))},distanceArray:function(a){if(a.length<2)return 0;var b=0;for(var c=0;c<a.length- 1;++c)b+=MathEx.distance(a[c].x,a[c].y,a[c+ 1].x,a[c+ 1].y);return b},bounded:function(a,b,c){return Math.min(c,Math.max(b,a))},random:function(a,b){return Math.random()*(b- a)+ a},lawOfCosine:function(o1,o2,a1,a2,b1,b2){var a=this.distance(a1,a2,o1,o2);var b=this.distance(b1,b2,o1,o2);var c=this.distance(b1,b2,a1,a2);return Math.acos((a*a+ b*b- c*c)/(2*a*b));},Interpolate:{cubic:function(a,b,c,d,e){var f,g,h,i,j;j=e*e,f=-0.5*a+ 1.5*b- 1.5*c+ 0.5*d,g=a- 2.5*b+ 2*c- 0.5*d,h=-0.5*a+ 0.5*c,i=b;return f*e*j+ g*j+ h*e+ i},hermite1d:function(a,b,c,d,e,f,g){var h,i,j,k,l,m,n,o;j=e*e,k=j*e,h=(b- a)*(1+ g)*(1- f)/2,h+=(c- b)*(1- g)*(1- f)/2,i=(c- b)*(1+ g)*(1- f)/2,i+=(d- c)*(1- g)*(1- f)/2,l=2*k- 3*j+ 1,m=k- 2*j+ e,n=k- j,o=-2*k+ 3*j;return l*b+ m*h+ n*i+ o*c},hermite2d:function(a,b,c,d,e,f,g){var h={x:0,y:0};h.x=this.hermite1d(a.x,b.x,c.x,d.x,e,f,g),h.y=this.hermite1d(a.y,b.y,c.y,d.y,e,f,g);return h}},Dampener:Class.extend({_a:[],_n:0,init:function(a){this._n=a},push:function(a){this._a.push(a),this._a.length>this._n&&this._a.shift();var a=0;for(var b=0;b<this._a.length;++b)a+=this._a[b];return a/this._a.length}})};
